[gd_scene load_steps=18 format=3 uid="uid://dkvb0fgb3pxmq"]

[ext_resource type="Script" uid="uid://r5e2o1b1h4ks" path="res://levels/level.gd" id="1_cx31d"]
[ext_resource type="PackedScene" uid="uid://c5y6nutqjbaxg" path="res://characters/character.tscn" id="2_cjusc"]
[ext_resource type="PackedScene" uid="uid://bui8pcpdmysge" path="res://levels/models/plainsview_ground.tscn" id="2_u40pl"]
[ext_resource type="PackedScene" uid="uid://c4hc1gk6gukco" path="res://destructables/models/building_e.tscn" id="5_2e7c1"]
[ext_resource type="PackedScene" uid="uid://dy4tsxpytht7s" path="res://destructables/models/building_b.tscn" id="5_ecacx"]
[ext_resource type="PackedScene" uid="uid://d1p7a8pryskly" path="res://destructables/models/building_g.tscn" id="7_aig1u"]
[ext_resource type="PackedScene" uid="uid://d0qsic6lwc4pl" path="res://systems/instant-replay/instant_replay_system.tscn" id="8_wu2dn"]
[ext_resource type="PackedScene" uid="uid://cr4wkylln1cmw" path="res://ui/countdown_overlay.tscn" id="9_j47ap"]
[ext_resource type="PackedScene" uid="uid://brksoipmibqja" path="res://ui/hud.tscn" id="10_5wrwu"]
[ext_resource type="PackedScene" uid="uid://h5ooflav8yup" path="res://ui/pause_menu.tscn" id="11_gaxeu"]
[ext_resource type="PackedScene" uid="uid://ycmi7iov5vux" path="res://ui/score_menu.tscn" id="12_odevf"]
[ext_resource type="PackedScene" uid="uid://bjk0rsklbs68f" path="res://ui/finished_overlay.tscn" id="13_mk8om"]
[ext_resource type="PackedScene" uid="uid://x56m7oe7wwmj" path="res://ui/cinematic_frame.tscn" id="14_rwck1"]
[ext_resource type="PackedScene" uid="uid://cbqgy1h06pfms" path="res://destructables/building_proc.tscn" id="15_5wrwu"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_j47ap"]
sky_top_color = Color(0.17423815, 0.33108467, 0.9630415, 1)
sky_horizon_color = Color(0.8964001, 0.99790335, 1.2561009, 1)
ground_bottom_color = Color(0.35000002, 0.59916663, 1, 1)
ground_horizon_color = Color(0.8964001, 0.99790335, 1.2561009, 1)

[sub_resource type="Sky" id="Sky_5wrwu"]
sky_material = SubResource("ProceduralSkyMaterial_j47ap")

[sub_resource type="Environment" id="Environment_gaxeu"]
background_mode = 2
sky = SubResource("Sky_5wrwu")
tonemap_mode = 2

[node name="PlainsviewLevel" type="Node3D"]
script = ExtResource("1_cx31d")
metadata/_custom_type_script = "uid://r5e2o1b1h4ks"

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_gaxeu")

[node name="plainsview_ground" parent="." instance=ExtResource("2_u40pl")]
transform = Transform3D(16, 0, 0, 0, 16, 0, 0, 0, 16, 0, 0, 0)

[node name="Character" parent="." instance=ExtResource("2_cjusc")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 12.246394, 0.40138268, 11.279823)

[node name="Destructables" type="Node3D" parent="."]

[node name="BuildingB" parent="Destructables" instance=ExtResource("5_ecacx")]
transform = Transform3D(-0.86602545, 0, -0.49999994, 0, 1, 0, 0.49999994, 0, -0.86602545, 6.856827, 0.8024019, 2.3747811)

[node name="BuildingE" parent="Destructables" instance=ExtResource("5_2e7c1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.142236, 0.95839655, -2.8654442)
cost = 200.0

[node name="BuildingG" parent="Destructables" instance=ExtResource("7_aig1u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.627121, 0.5023146, 10.913905)

[node name="BuildingProc" parent="Destructables" instance=ExtResource("15_5wrwu")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 9.600184, 0.36021972, 10.281294)
health = 20.0
cost = 200.0

[node name="BuildingProc2" parent="Destructables" instance=ExtResource("15_5wrwu")]
transform = Transform3D(0.1836254, 0, 0.98299634, 0, 1, 0, -0.98299634, 0, 0.1836254, 11.351812, 0.1717785, 13.645028)
health = 10.0
cost = 100.0

[node name="BuildingProc3" parent="Destructables" instance=ExtResource("15_5wrwu")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 5.3237658, 0.36021984, 9.9751835)
health = 10.0
cost = 100.0

[node name="BuildingProc4" parent="Destructables" instance=ExtResource("15_5wrwu")]
transform = Transform3D(-0.9659258, 0, 0.25881904, 0, 1, 0, -0.25881904, 0, -0.9659258, 7.2838597, 0.25037205, 12.882426)
health = 15.0
cost = 150.0

[node name="BuildingProc5" parent="Destructables" instance=ExtResource("15_5wrwu")]
transform = Transform3D(-2.9802322e-08, 0, 1.0000001, 0, 1, 0, -1.0000001, 0, -2.9802322e-08, 2.3036227, 0.25037205, 9.254865)
health = 15.0
cost = 150.0

[node name="InstantReplaySystem" parent="." instance=ExtResource("8_wu2dn")]

[node name="LevelTimer" type="Timer" parent="."]
one_shot = true

[node name="Node" type="CanvasLayer" parent="."]

[node name="CountdownOverlay" parent="Node" instance=ExtResource("9_j47ap")]
unique_name_in_owner = true
metadata/_edit_use_anchors_ = true

[node name="HUD" parent="Node" instance=ExtResource("10_5wrwu")]
unique_name_in_owner = true
metadata/_edit_use_anchors_ = true

[node name="PauseMenu" parent="Node" instance=ExtResource("11_gaxeu")]
unique_name_in_owner = true
metadata/_edit_use_anchors_ = true

[node name="ScoreMenu" parent="Node" instance=ExtResource("12_odevf")]
unique_name_in_owner = true
metadata/_edit_use_anchors_ = true

[node name="FinishedOverlay" parent="Node" instance=ExtResource("13_mk8om")]
unique_name_in_owner = true
metadata/_edit_use_anchors_ = true

[node name="CinematicFrame" parent="Node" instance=ExtResource("14_rwck1")]
unique_name_in_owner = true
metadata/_edit_use_anchors_ = true

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
light_color = Color(0.91733336, 1, 0.38, 1)
shadow_enabled = true

[connection signal="timeout" from="LevelTimer" to="." method="_on_level_timer_timeout"]
[connection signal="finished" from="Node/CountdownOverlay" to="." method="_on_countdown_overlay_finished"]
[connection signal="finished" from="Node/FinishedOverlay" to="." method="_on_finished_overlay_finished"]
